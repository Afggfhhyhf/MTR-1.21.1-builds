<div class="column gap wrapper">
	<div>
		<button mat-button (click)="addVehicle(content)">
			<mat-icon>add</mat-icon>
			Add Vehicle
		</button>
	</div>

	<div #content class="content padded">
		@if (dataService.vehicles().length > 0) {
			<mat-accordion displayMode="flat">
				@for (vehicle of dataService.vehicles(); track $index) {
					<mat-expansion-panel [expanded]="isEditingAtIndex($index)" (opened)="editAtIndex($index)">
						<mat-expansion-panel-header>
							<mat-panel-title class="row gap-small vehicle-color" [style.border-left-color]="'#' + vehicle.color">
								<mat-icon>{{ getIcon(vehicle.transportMode) }}</mat-icon>
								<b class="spacing">{{ vehicle.name }}</b>
								<div>{{ vehicle.id }}</div>
							</mat-panel-title>
						</mat-expansion-panel-header>
						<ng-template matExpansionPanelContent>
							<button mat-button (click)="editDetails()">
								<mat-icon>edit</mat-icon>
								Edit Properties
							</button>
						</ng-template>
						<mat-action-row>
							<button mat-icon-button (click)="moveVehicle(content, -2)" [disabled]="$index == 0" matTooltip="Move To Top">
								<mat-icon>keyboard_double_arrow_up</mat-icon>
							</button>
							<button mat-icon-button (click)="moveVehicle(content, -1)" [disabled]="$index == 0" matTooltip="Move Up">
								<mat-icon>keyboard_arrow_up</mat-icon>
							</button>
							<button mat-icon-button (click)="moveVehicle(content, 1)" [disabled]="$index == dataService.vehicles().length - 1" matTooltip="Move Down">
								<mat-icon>keyboard_arrow_down</mat-icon>
							</button>
							<button mat-icon-button (click)="moveVehicle(content, 2)" [disabled]="$index == dataService.vehicles().length - 1" matTooltip="Move To Bottom">
								<mat-icon>keyboard_double_arrow_down</mat-icon>
							</button>
							<button mat-icon-button (click)="duplicateVehicle()" matTooltip="Duplicate">
								<mat-icon>content_copy</mat-icon>
							</button>
							<button mat-icon-button (click)="deleteVehicle()" matTooltip="Delete">
								<mat-icon>delete</mat-icon>
							</button>
						</mat-action-row>
					</mat-expansion-panel>
				}
			</mat-accordion>
		}
	</div>
</div>
